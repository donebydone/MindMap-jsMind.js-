"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/commandOpenai";
exports.ids = ["pages/api/commandOpenai"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcommandOpenai&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CcommandOpenai.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcommandOpenai&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CcommandOpenai.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\commandOpenai.js */ \"(api)/./pages/api/commandOpenai.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/commandOpenai\",\n        pathname: \"/api/commandOpenai\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_commandOpenai_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNvbW1hbmRPcGVuYWkmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2NvbW1hbmRPcGVuYWkuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taW5kbWFwLWFwcC8/ODNkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNvbW1hbmRPcGVuYWkuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jb21tYW5kT3BlbmFpXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29tbWFuZE9wZW5haVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcommandOpenai&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CcommandOpenai.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/commandOpenai.js":
/*!************************************!*\
  !*** ./pages/api/commandOpenai.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    const { openAIKey, defaultAssistantId, prompt, threadId, nodes, selectNode, general_prompt } = req.body;\n    console.log(req.body);\n    if (!openAIKey) {\n        return res.status(402).json({\n            error: \"OpenAI API key is required\"\n        });\n    }\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        apiKey: openAIKey\n    });\n    try {\n        await openai.models.list();\n        const message = await createThreadMessage(openai, threadId, nodes, selectNode, prompt, general_prompt);\n        console.log(message.content);\n        const run = await openai.beta.threads.runs.create(threadId, {\n            assistant_id: defaultAssistantId\n        });\n        await checkStatus(openai, threadId, run.id);\n        const messages = await openai.beta.threads.messages.list(threadId);\n        const messageValue = messages.body.data[0].content[0].text.value;\n        const messageContent = JSON.parse(messageValue);\n        console.log(messageContent);\n        const normalizedResponse = normalizeResponse(messageContent);\n        console.log(normalizedResponse);\n        res.status(200).json({\n            message: normalizedResponse\n        });\n    } catch (error) {\n        handleError(res, error);\n    }\n}\nasync function createThreadMessage(openai, threadId, mindmap, node, generalPrompt, general_prompt) {\n    const prompt = generalPrompt.replace(\"${node}\", node).replace(\"${mindmap}\", mindmap);\n    console.log(prompt);\n    return await openai.beta.threads.messages.create(threadId, {\n        role: \"user\",\n        content: ` ${general_prompt} ${prompt}`\n    });\n}\nasync function checkStatus(openai, threadId, runId) {\n    let isComplete = false;\n    while(!isComplete){\n        const runStatus = await openai.beta.threads.runs.retrieve(threadId, runId);\n        if (runStatus.status === \"completed\") {\n            isComplete = true;\n        } else {\n            await new Promise((resolve)=>setTimeout(resolve, 2000));\n        }\n    }\n    await new Promise((resolve)=>setTimeout(resolve, 2000));\n}\nfunction normalizeResponse(messageContent) {\n    const keys = Object.keys(messageContent);\n    if (keys.length > 1) {\n        const content = messageContent[keys[1]];\n        return {\n            type: messageContent.type,\n            content\n        };\n    } else {\n        const content = messageContent[keys[0]];\n        return {\n            type: \"\",\n            content\n        };\n    }\n}\nfunction handleError(res, error) {\n    if (error && error.status === 401) {\n        res.status(401).json({\n            error: \"Invalid OpenAI API key\"\n        });\n    } else if (error && error.status) {\n        res.status(error.status).json({\n            error: error.data\n        });\n    } else {\n        res.status(500).json({\n            error: \"An unexpected error occurred\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNDLFVBQVlDLFdBQVdELFNBQVM7QUFDckQ7QUFFQSxTQUFTWixrQkFBa0JKLGNBQWM7SUFDdkMsTUFBTWtCLE9BQU9DLE9BQU9ELElBQUksQ0FBQ2xCO0lBRXpCLElBQUlrQixLQUFLRSxNQUFNLEdBQUcsR0FBRztRQUNuQixNQUFNbEMsVUFBVWMsY0FBYyxDQUFDa0IsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUV2QyxPQUFPO1lBQ0xHLE1BQU1yQixlQUFlcUIsSUFBSTtZQUN6Qm5DO1FBQ0Y7SUFDRixPQUFPO1FBQ0wsTUFBTUEsVUFBVWMsY0FBYyxDQUFDa0IsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUN2QyxPQUFPO1lBQ0xHLE1BQU07WUFDTm5DO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsU0FBU21CLFlBQVl4QyxHQUFHLEVBQUVlLEtBQUs7SUFDN0IsSUFBSUEsU0FBU0EsTUFBTWIsTUFBTSxLQUFLLEtBQUs7UUFDakNGLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVksT0FBTztRQUF5QjtJQUN6RCxPQUFPLElBQUlBLFNBQVNBLE1BQU1iLE1BQU0sRUFBRTtRQUNoQ0YsSUFBSUUsTUFBTSxDQUFDYSxNQUFNYixNQUFNLEVBQUVDLElBQUksQ0FBQztZQUFFWSxPQUFPQSxNQUFNaUIsSUFBSTtRQUFDO0lBQ3BELE9BQU87UUFDTGhDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVksT0FBTztRQUErQjtJQUMvRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWluZG1hcC1hcHAvLi9wYWdlcy9hcGkvY29tbWFuZE9wZW5haS5qcz9iNjQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogXCJNZXRob2Qgbm90IGFsbG93ZWRcIiB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHtcclxuICAgIG9wZW5BSUtleSxcclxuICAgIGRlZmF1bHRBc3Npc3RhbnRJZCxcclxuICAgIHByb21wdCxcclxuICAgIHRocmVhZElkLFxyXG4gICAgbm9kZXMsXHJcbiAgICBzZWxlY3ROb2RlLFxyXG4gICAgZ2VuZXJhbF9wcm9tcHQsXHJcbiAgfSA9IHJlcS5ib2R5O1xyXG5cclxuICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcblxyXG4gIGlmICghb3BlbkFJS2V5KSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDIpLmpzb24oeyBlcnJvcjogXCJPcGVuQUkgQVBJIGtleSBpcyByZXF1aXJlZFwiIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7IGFwaUtleTogb3BlbkFJS2V5IH0pO1xyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgb3BlbmFpLm1vZGVscy5saXN0KCk7XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGNyZWF0ZVRocmVhZE1lc3NhZ2UoXHJcbiAgICAgIG9wZW5haSxcclxuICAgICAgdGhyZWFkSWQsXHJcbiAgICAgIG5vZGVzLFxyXG4gICAgICBzZWxlY3ROb2RlLFxyXG4gICAgICBwcm9tcHQsXHJcbiAgICAgIGdlbmVyYWxfcHJvbXB0XHJcbiAgICApO1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZS5jb250ZW50KTtcclxuXHJcbiAgICBjb25zdCBydW4gPSBhd2FpdCBvcGVuYWkuYmV0YS50aHJlYWRzLnJ1bnMuY3JlYXRlKHRocmVhZElkLCB7XHJcbiAgICAgIGFzc2lzdGFudF9pZDogZGVmYXVsdEFzc2lzdGFudElkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgY2hlY2tTdGF0dXMob3BlbmFpLCB0aHJlYWRJZCwgcnVuLmlkKTtcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IG9wZW5haS5iZXRhLnRocmVhZHMubWVzc2FnZXMubGlzdCh0aHJlYWRJZCk7XHJcbiAgICBjb25zdCBtZXNzYWdlVmFsdWUgPSBtZXNzYWdlcy5ib2R5LmRhdGFbMF0uY29udGVudFswXS50ZXh0LnZhbHVlO1xyXG4gICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBKU09OLnBhcnNlKG1lc3NhZ2VWYWx1ZSk7XHJcblxyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZUNvbnRlbnQpO1xyXG5cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRSZXNwb25zZSA9IG5vcm1hbGl6ZVJlc3BvbnNlKG1lc3NhZ2VDb250ZW50KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhub3JtYWxpemVkUmVzcG9uc2UpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogbm9ybWFsaXplZFJlc3BvbnNlIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVFcnJvcihyZXMsIGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRocmVhZE1lc3NhZ2UoXHJcbiAgb3BlbmFpLFxyXG4gIHRocmVhZElkLFxyXG4gIG1pbmRtYXAsXHJcbiAgbm9kZSxcclxuICBnZW5lcmFsUHJvbXB0LFxyXG4gIGdlbmVyYWxfcHJvbXB0XHJcbikge1xyXG4gIGNvbnN0IHByb21wdCA9IGdlbmVyYWxQcm9tcHRcclxuICAgIC5yZXBsYWNlKFwiJHtub2RlfVwiLCBub2RlKVxyXG4gICAgLnJlcGxhY2UoXCIke21pbmRtYXB9XCIsIG1pbmRtYXApO1xyXG5cclxuICBjb25zb2xlLmxvZyhwcm9tcHQpO1xyXG5cclxuICByZXR1cm4gYXdhaXQgb3BlbmFpLmJldGEudGhyZWFkcy5tZXNzYWdlcy5jcmVhdGUodGhyZWFkSWQsIHtcclxuICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgY29udGVudDogYCAke2dlbmVyYWxfcHJvbXB0fSAke3Byb21wdH1gLFxyXG4gIH0pO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjaGVja1N0YXR1cyhvcGVuYWksIHRocmVhZElkLCBydW5JZCkge1xyXG4gIGxldCBpc0NvbXBsZXRlID0gZmFsc2U7XHJcbiAgd2hpbGUgKCFpc0NvbXBsZXRlKSB7XHJcbiAgICBjb25zdCBydW5TdGF0dXMgPSBhd2FpdCBvcGVuYWkuYmV0YS50aHJlYWRzLnJ1bnMucmV0cmlldmUodGhyZWFkSWQsIHJ1bklkKTtcclxuICAgIGlmIChydW5TdGF0dXMuc3RhdHVzID09PSBcImNvbXBsZXRlZFwiKSB7XHJcbiAgICAgIGlzQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVSZXNwb25zZShtZXNzYWdlQ29udGVudCkge1xyXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlQ29udGVudCk7XHJcblxyXG4gIGlmIChrZXlzLmxlbmd0aCA+IDEpIHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlQ29udGVudFtrZXlzWzFdXTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBtZXNzYWdlQ29udGVudC50eXBlLFxyXG4gICAgICBjb250ZW50LFxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2VDb250ZW50W2tleXNbMF1dO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogXCJcIixcclxuICAgICAgY29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFcnJvcihyZXMsIGVycm9yKSB7XHJcbiAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgT3BlbkFJIEFQSSBrZXlcIiB9KTtcclxuICB9IGVsc2UgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1cykge1xyXG4gICAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMpLmpzb24oeyBlcnJvcjogZXJyb3IuZGF0YSB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkXCIgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJvcGVuQUlLZXkiLCJkZWZhdWx0QXNzaXN0YW50SWQiLCJwcm9tcHQiLCJ0aHJlYWRJZCIsIm5vZGVzIiwic2VsZWN0Tm9kZSIsImdlbmVyYWxfcHJvbXB0IiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm9wZW5haSIsImFwaUtleSIsIm1vZGVscyIsImxpc3QiLCJjcmVhdGVUaHJlYWRNZXNzYWdlIiwiY29udGVudCIsInJ1biIsImJldGEiLCJ0aHJlYWRzIiwicnVucyIsImNyZWF0ZSIsImFzc2lzdGFudF9pZCIsImNoZWNrU3RhdHVzIiwiaWQiLCJtZXNzYWdlcyIsIm1lc3NhZ2VWYWx1ZSIsImRhdGEiLCJ0ZXh0IiwidmFsdWUiLCJtZXNzYWdlQ29udGVudCIsIkpTT04iLCJwYXJzZSIsIm5vcm1hbGl6ZWRSZXNwb25zZSIsIm5vcm1hbGl6ZVJlc3BvbnNlIiwiaGFuZGxlRXJyb3IiLCJtaW5kbWFwIiwibm9kZSIsImdlbmVyYWxQcm9tcHQiLCJyZXBsYWNlIiwicm9sZSIsInJ1bklkIiwiaXNDb21wbGV0ZSIsInJ1blN0YXR1cyIsInJldHJpZXZlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwia2V5cyIsIk9iamVjdCIsImxlbmd0aCIsInR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/commandOpenai.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcommandOpenai&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5CcommandOpenai.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();